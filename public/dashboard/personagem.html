<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <link
      rel="shortcut icon"
      href="../assets/icon/favicon2.ico"
      type="image/x-icon"
    />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AquaTech | Tempo Real</title>

    <link rel="stylesheet" href="./../css/dashboards.css" />
    <link rel="stylesheet" href="./../css/estiloAquatech.css" />

    <script src="../js/sessao.js"></script>
    <script src="../js/alerta.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body onload="pegarDadosPersonagemEspecifico()">

  </div>

    <div class="janela">
      <div class="header-left dash-header">
        <img src="../assets/imgs/Logo_OuterWorlds.png" alt="" />

        <div class="hello">
          <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
        </div>

        <div class="btn-nav-white">
          <a href="cards.html">
            <h3>Personagens</h3>
          </a>
        </div>

        <div class="btn-nav-white">
          <a href="./dashboard.html">
            <h3>Gráficos</h3>
          </a>
        </div>

        <div class="btn-nav-white">
          <a href="../criacaoPersonagem.html">
            <h3>Criar mais um personagem</h3>
          </a>
        </div>

        <div class="btn-logout" onclick="limparSessao()">
          <h3>Sair</h3>
        </div>
      </div>
      <div class="dash">
        <!-- <div id="alerta"></div> -->
        <!-- <div class="area-parametros-alerta"></div> -->
        <div class="dash-right-personagem-container" >
          <div id="painelPersonagem">
            <div class="partePainel" id="painel_1">
              <div class="div_cards" id="div_desempenho">
                <span id="nomePersonagem"></span>
                <br>
                <div id="div_desempenho_imagem">
                  
                </div>
                <div id="div_desempenho_texto">
                  <br>
                  <span>Quantidade de acertos: <span id="quantidadeAcertos"></span></span>
                  <br>
                  <br>
                  <span id="avaliacaoFuncionario"></span>
                </div>
              </div>
              <div class="div_cards">
                <div class="informacao">
                  <div id="div_cards_titulo">
                    <h1>ATRIBUTOS: </h1>
                  </div>
                  <h1>CORPO</h1>
                  <div class="informacao__registro">
                    <span>Força</span>
                    <div id="line"></div>
                    <span id="valorForca"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Destreza</span>
                    <div id="line"></div>
                    <span id="valorDestreza"></span>
                  </div>
                  <h1>MENTE</h1>
                  <div class="informacao__registro">
                    <span>Inteligência</span>
                    <div id="line"></div>
                    <span id="valorInteligencia"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Percepção</span>
                    <div id="line"></div>
                    <span id="valorPercepcao"></span>
                  </div>
                  <h1>PERSONALIDADE</h1>
                  <div class="informacao__registro">
                    <span>Charme</span>
                    <div id="line"></div>
                    <span id="valorCharme"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Temperamento</span>
                    <div id="line"></div>
                    <span id="valorTemperamento"></span>
                  </div>
                </div>
              </div>
              <div class="div_cards">
                <div class="informacao">
                  <h1>APTIDÃO</h1>
                  
                    <span id="aptidaoSelecionado"></span>
                  
                  <h1>FALHAS</h1>
                  
                    <span id="falhaSelecionado"></span>
                  
                  <h1>TOKENS</h1>
                  <span id="tokenSelecionado1"></span>
                  <br>
                  <span id="tokenSelecionado2"></span>
      
                  <h1>Companheiros</h1>
                  <span id="companheiroSelecionado1"></span> 
                  <br>
                  <span id="companheiroSelecionado2"></span>
                </div>
              </div>
            </div>
            <div class="partePainel" id="painel_2">
              
              <div class="div_cards" id="div_habilidades">
                <div class="informacao">
                  <div id="div_cards_titulo">
                    <h1>HABILIDADES: </h1>
                  </div>
                  <h1>ARMAS BRANCAS</h1>
                  <div class="informacao__registro">
                    <span>1 Mão</span>
                    <div id="line"></div>
                    <span id="valor1Mao"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>2 Mãos</span>
                    <div id="line"></div>
                    <span id="valor2Mao"></span>
                  </div>
                  <h1>LONGO ALCANCE</h1>
                  <div class="informacao__registro">
                    <span>Pistolas</span>
                    <div id="line"></div>
                    <span id="valorPistolas"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Armas Longas</span>
                    <div id="line"></div>
                    <span id="valorArmasLongas"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Armas Pesadas</span>
                    <div id="line"></div>
                    <span id="valorArmasPesadas"></span>
                  </div>
                  <h1>DEFESA</h1>
                  <div class="informacao__registro">
                    <span>Evasão</span>
                    <div id="line"></div>
                    <span id="valorEvasao"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Bloqueio</span>
                    <div id="line"></div>
                    <span id="valorBloqueio"></span>
                  </div>
                  <h1>DIÁLOGO</h1>
                  <div class="informacao__registro">
                    <span>Persuasão</span>
                    <div id="line"></div>
                    <span id="valorPersuasao"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Mentira</span>
                    <div id="line"></div>
                    <span id="valorMentira"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Intimidação</span>
                    <div id="line"></div>
                    <span id="valorIntimidacao"></span>
                  </div>
                  <h1>FURTIVIDADE</h1>
                  <div class="informacao__registro">
                    <span>Esgueira</span>
                    <div id="line"></div>
                    <span id="valorEsgueira"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Hacking</span>
                    <div id="line"></div>
                    <span id="valorHacking"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Gazua</span>
                    <div id="line"></div>
                    <span id="valorGazua"></span>
                  </div>
                  <h1>TECNOLOGIA</h1>
                  <div class="informacao__registro">
                    <span>Medicina</span>
                    <div id="line"></div>
                    <span id="valorMedicina"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Ciência</span>
                    <div id="line"></div>
                    <span id="valorCiencia"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Engenharia</span>
                    <div id="line"></div>
                    <span id="valorEngenharia"></span>
                  </div>
                  <h1>LIDERANÇA</h1>
                  <div class="informacao__registro">
                    <span>Inspiração</span>
                    <div id="line"></div>
                    <span id="valorInspiracao"></span>
                  </div>
                  <div class="informacao__registro">
                    <span>Determinação</span>
                    <div id="line"></div>
                    <span id="valorDeterminacao"></span>
                  </div>
                </div>
              </div>
              <br>
              <img src="../assets/imgs/logoSpacersChoice.png" alt="spacers choice logo">
            </div>
          </div>
          
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
  var personagemSelecionado;
  var personagemSelecionadoAtributo;
  var personagemSelecionadoHabilidade;
  function pegarDadosPersonagemEspecifico () {
    var listaPersonagensUsuario = JSON.parse(sessionStorage.PERSONAGENS)
    var idPersonagemSelecionado = sessionStorage.PERSONAGEM_SELECIONADO
    console.log(idPersonagemSelecionado)
    console.log(listaPersonagensUsuario)
    for(var i = 0; i< listaPersonagensUsuario.length;i++){
      if(listaPersonagensUsuario[i].idPersonagem == idPersonagemSelecionado) {
        console.log("Personagem Encontrado")
        personagemSelecionado = listaPersonagensUsuario[i];
      }
    }
    console.log(personagemSelecionado)

    fetch(`/medidas/todosAtributosPersonagem/${idPersonagemSelecionado}`, { cache: "no-store" })
      .then(function (response) {
        if (response.ok) {
          response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            resposta.reverse();
            console.log(resposta)   
            personagemSelecionadoAtributo = resposta;         
          });
        } else {
          console.error("Nenhum dado encontrado ou erro na API");
        }
      })
      .catch(function (error) {
        console.error(
          `Erro na obtenção dos dados: ${error.message}`
        );
      });

      fetch(`/medidas/todasHabilidadesPersonagem/${idPersonagemSelecionado}`, { cache: "no-store" })
      .then(function (response) {
        if (response.ok) {
          response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            resposta.reverse();
            console.log(resposta)   
            personagemSelecionadoHabilidade = resposta;
            atualizarValores()         
          });
        } else {
          console.error("Nenhum dado encontrado ou erro na API");
        }
      })
      .catch(function (error) {
        console.error(
          `Erro na obtenção dos dados: ${error.message}`
        );
      });

  }

  function atualizarValores(){

    nomePersonagem.innerHTML = personagemSelecionado.nome

    if (personagemSelecionado.sexo == 1) {
      div_desempenho_imagem.innerHTML = 
      `
      <img src="../assets/imgs/maleProfile.png" alt="Imagem Personagem">
      `
    } else {
      div_desempenho_imagem.innerHTML = 
      `
      <img src="../assets/imgs/femaleProfile.png" alt="Imagem Personagem">
      `
    }

    quantidadeAcertos.innerHTML = personagemSelecionado.acertosTeste
    if (personagemSelecionado.acertosTeste < 2) {
      avaliacaoFuncionario.innerHTML = "Que a Lei tenha piedade desse empregado"
    } else if (personagemSelecionado.acertosTeste < 3) {
      avaliacaoFuncionario.innerHTML = "Com pouco de empenho, sua chance de sobrevivência é bem razoável !"
    } else {
      avaliacaoFuncionario.innerHTML = "Bonança pode se beneficiar muito com esse funcionário !"
    }

    

    valorForca.innerHTML = personagemSelecionadoAtributo[0].forca
    valorDestreza.innerHTML = personagemSelecionadoAtributo[0].destreza
    valorInteligencia.innerHTML = personagemSelecionadoAtributo[0].inteligencia
    valorPercepcao.innerHTML = personagemSelecionadoAtributo[0].percepcao
    valorCharme.innerHTML = personagemSelecionadoAtributo[0].charme
    valorTemperamento.innerHTML = personagemSelecionadoAtributo[0].temperamento

    aptidaoSelecionado.innerHTML = personagemSelecionado.aptidao;
    falhaSelecionado.innerHTML = personagemSelecionado.falha;
    tokenSelecionado1.innerHTML = personagemSelecionado.token1;
    tokenSelecionado2.innerHTML = personagemSelecionado.token2;
    companheiroSelecionado1.innerHTML = personagemSelecionado.companheiro1;
    companheiroSelecionado2.innerHTML = personagemSelecionado.companheiro2;
    
    valor1Mao.innerHTML = personagemSelecionadoHabilidade[0]["1mao"];
    valor2Mao.innerHTML = personagemSelecionadoHabilidade[0]["2mao"];
    valorPistolas.innerHTML = personagemSelecionadoHabilidade[0]["pistolas"];
    valorArmasLongas.innerHTML = personagemSelecionadoHabilidade[0]["armasLongas"];
    valorArmasPesadas.innerHTML = personagemSelecionadoHabilidade[0]["armasPesadas"];
    valorEvasao.innerHTML = personagemSelecionadoHabilidade[0]["evasao"];
    valorBloqueio.innerHTML = personagemSelecionadoHabilidade[0]["bloqueio"];
    valorPersuasao.innerHTML = personagemSelecionadoHabilidade[0]["persuasao"];
    valorMentira.innerHTML = personagemSelecionadoHabilidade[0]["mentira"];
    valorIntimidacao.innerHTML = personagemSelecionadoHabilidade[0]["intimidacao"];
    valorEsgueira.innerHTML = personagemSelecionadoHabilidade[0]["esgueira"];
    valorHacking.innerHTML = personagemSelecionadoHabilidade[0]["hacking"];
    valorGazua.innerHTML = personagemSelecionadoHabilidade[0]["gazua"];
    valorMedicina.innerHTML = personagemSelecionadoHabilidade[0]["medicina"];
    valorCiencia.innerHTML = personagemSelecionadoHabilidade[0]["ciencia"];
    valorEngenharia.innerHTML = personagemSelecionadoHabilidade[0]["engenharia"];
    valorInspiracao.innerHTML = personagemSelecionadoHabilidade[0]["inspiracao"];
    valorDeterminacao.innerHTML = personagemSelecionadoHabilidade[0]["determinacao"];
    
  }

</script>

<!-- 

{
    "idPersonagem": 100,
    "nome": "Mark Anthony",
    "sexo": 1,
    "aptidao": "nenhuma aptidao discernivel",
    "falha": "acrofobia",
    "dataCriacao": "2025-05-07 11:10:59",
    "token1": "assassino",
    "token2": "labias de vendedor",
    "fkUsuario": 1,
    "acertosTeste": 3,
    "companheiro1": "ellie",
    "companheiro2": "nyoka"
}

[{"forca":-1,"destreza":3,"inteligencia":3,"percepcao":3,"charme":3,"temperamento":1}]

[{"1mao":20,"2mao":40,"pistolas":20,"armasLongas":56,"armasPesadas":56,"evasao":10,"bloqueio":23,"persuasao":85,"mentira":56,"intimidacao":1,"esgueira":20,"hacking":45,"gazua":10,"medicina":56,"ciencia":47,"engenharia":89,"inspiracao":96,"determinacao":25}]

-->